<!DOCTYPE html>
<html>

<head>
    <title>Login Form</title>
</head>

<body>
    <form>
        <label for="first-name">First Name</label>
        <input type="text" id="first-name">
        <label for="last-name">Last Name</label>
        <input type="text" id="last-name">
        <label for="email">Email</label>
        <input type="text" id="email">
        <label for="password">Password</label>
        <input type="password" id="password">
        <button >Submit</button>
    </form>
    <button id="login">Login</button>
</body>
<script>
    const form = document.querySelector('form')
    form.addEventListener('submit', event => {
        event.preventDefault();
        name = event.target[0].value;
        email = event.target[2].value
        password = event.target[3].value;
        var xhr = new XMLHttpRequest();
        var url = "http://127.0.0.1:8069/user/create";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        var data = JSON.stringify({"parms": { "name": name, "password": password, 'email': email }});
        console.log('------------', data, '------------')
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                var json = JSON.parse(xhr.responseText);
                console.log(json.name + ", " + json.password);
            }
        };
        res = xhr.send(data);
        console.log('------------', res, '-----------')
        window.location.href = "/myaddons/work_space/navigation.html"
    })

    const btn = document.getElementById('login')
    btn.addEventListener('click', e => {
        e.preventDefault();
        window.location.href = 'http://localhost:8069/web/login'
    })
</script>

</html>